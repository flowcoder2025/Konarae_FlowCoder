# Konarae FlowCoder - Government Support Project Matching Platform
# Copy this file to .env.local and fill in your actual values

# ============================================
# Database (Supabase PostgreSQL)
# ============================================
DATABASE_URL="postgresql://postgres.xxx:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres?pgbouncer=true"
DIRECT_URL="postgresql://postgres.xxx:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres"

# ============================================
# Supabase (required for crawler file storage)
# ============================================
NEXT_PUBLIC_SUPABASE_URL="https://xxx.supabase.co"
SUPABASE_URL="https://xxx.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="your-anon-key"
SUPABASE_ANON_KEY="your-anon-key"
SUPABASE_SERVICE_KEY="your-service-key"

# ============================================
# NextAuth
# ============================================
# Local: http://localhost:3000
# Production: https://mate.flow-coder.com
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="generate-with-openssl-rand-base64-32"

# ============================================
# OAuth Providers
# ============================================
GOOGLE_CLIENT_ID="your-google-client-id"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# Optional: Kakao OAuth
KAKAO_CLIENT_ID="your-kakao-client-id"
KAKAO_CLIENT_SECRET="your-kakao-client-secret"

# ============================================
# AI Services
# ============================================
# Google Gemini (required for crawler AI analysis)
GOOGLE_GENERATIVE_AI_API_KEY="your-gemini-api-key"

# OpenAI (for embeddings)
OPENAI_API_KEY="your-openai-api-key"
EMBEDDING_MODEL="text-embedding-3-small"
EMBEDDING_DIMENSIONS="1536"
CHUNK_SIZE="512"
CHUNK_OVERLAP="50"

# ============================================
# Notifications
# ============================================
# Resend Email
RESEND_API_KEY="your-resend-api-key"

# Discord Webhook (optional)
DISCORD_WEBHOOK_URL="your-discord-webhook-url"

# Slack Webhook (optional)
SLACK_WEBHOOK_URL="your-slack-webhook-url"

# ============================================
# Cache & Rate Limiting
# ============================================
UPSTASH_REDIS_URL="your-upstash-redis-url"
UPSTASH_REDIS_TOKEN="your-upstash-redis-token"

# ============================================
# Document Parser Service
# ============================================
# text_parser API (HWP/HWPX/PDF 통합 파싱)
# Repository: https://github.com/Jerome87hyunil/text_parser
#
# Local/Vercel: 외부 URL 사용
# TEXT_PARSER_URL="https://hwp-api.onrender.com"
#
# Railway Worker: 내부 네트워킹 사용 (빠르고 무료)
TEXT_PARSER_URL="http://text_parser.railway.internal"

# ============================================
# Railway Workers (분리된 마이크로서비스)
# ============================================
# 두 워커 모두 Railway Dashboard에서 배포 후 URL 확인
#
# [Crawler Worker] - 크롤링 전용 (worker-server.ts)
# 엔드포인트: /crawl, /crawl/batch, /test-parser, /health
# 실행 명령: npm run worker:crawler
RAILWAY_CRAWLER_URL="https://crawler.up.railway.app"

# [Embedding Worker] - 임베딩/매칭 전용 (embedding-server.ts)
# 엔드포인트: /generate-embeddings, /matching/batch, /health
# 실행 명령: npm run worker:embedding
RAILWAY_WORKER_URL="https://embedding.up.railway.app"

# Worker API Key (generate with: openssl rand -base64 32)
# IMPORTANT: 두 워커 모두 동일한 키 사용 (Vercel과도 공유)
WORKER_API_KEY="your-worker-api-key"

# ============================================
# Upstash QStash (Cron Jobs)
# ============================================
# Get these from: https://console.upstash.com/qstash
QSTASH_URL="https://qstash.upstash.io"
QSTASH_TOKEN="your-qstash-token"
QSTASH_CURRENT_SIGNING_KEY="sig_xxx"
QSTASH_NEXT_SIGNING_KEY="sig_xxx"

# ============================================
# Vercel Cron (Alternative to QStash)
# ============================================
# Generate with: openssl rand -base64 32
CRON_SECRET="your-cron-secret"

# ============================================
# Admin API Access
# ============================================
# Generate with: openssl rand -base64 32
ADMIN_API_KEY="your-admin-api-key"

# ============================================
# Development
# ============================================
NODE_ENV="development"
NEXT_TELEMETRY_DISABLED=1
